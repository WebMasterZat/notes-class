<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit</title>
    <link rel="shortcut icon" href="#">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
</head>

<body>

<div class="container py-5">
    <form>
        <h4>Редактировать заметку</h4>
        <div class="error">
            <!-- ВВЫВОД ОШИБОК -->
        </div>
        <div class="form-group">
            <label for="title">Title</label>
            <input type="text" class="form-control" id="titleEdit" placeholder="Заголовок">
        </div>
        <div class="form-group mt-4">
            <label for="textarea">Body</label>
            <textarea class="form-control" rows="3" id="textareaEdit" placeholder="Содержание"></textarea>
        </div>
        <div class="form-group my-3">
            <button class="btn btn-primary saveEdit">Сохранить</button>
        </div>
    </form>
</div>


<script src="https://cdnjs.cloudflare.com/ajax/libs/uuid/8.3.2/uuid.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>

<script src="form.js"></script>
<script src="notes.js"></script>
<script>

    //?id=8063bc18-308c-4f4c-aa2a-799ad762a503

    let notesEdit = new NotesClass()
    // let formClassEdit = new FormClass()
    let query = location.search.match(/(?<=\?id=)\S+/)
    let id = query[0].trim()

    document.getElementById('titleEdit').value = notesEdit.getById(id).title
    document.getElementById('textareaEdit').value = notesEdit.getById(id).body

    document.querySelector('.saveEdit').addEventListener('click', (e) => {
        e.preventDefault()
        let title = document.getElementById('titleEdit').value
        let body = document.getElementById('textareaEdit').value
        notesEdit.update(id, {
            title,
            body
        })
       location.href = 'http://test.localhost/index.html'
    })


</script>
</body>
</html>

<!--// 1. по клику на кнопку редактировать перейти на страницу edit-->
<!--// 2. get (параметр search об-та location) параметром передать id заметки в формате id = номер id (сам id)-->
<!--// 3. в самом файле edit.html в JS прописать получение get параметра id из строки браузера (он же получается из свойства search объекта location)-->
<!--// т.е. если строка вида http://test.localhost/edit.html?id=123-->
<!--// то надо создать об-т query в формате { id: 123 }-->
<!--// использовать метод split или метод match ( c регулярным выражением )-->
<!--// 4. Создать экземпляр класса заметок и по полученному из строки id получить текущую заметку из localstorage по её id (getById())-->
<!--// 5. поле заголовок найденной заметки поставить в value input формы редактирования, поле содержание в textarea. Т.е. вставить данные-->
<!--// заметки в ДОМ-->

<!--// ЕСЛИ СМОЖЕШЬ-->
<!--// 6. Отредактировать выбранную заметку и вернуться на страницу index.html, где заметка будет отображаться в отредактированном виде-->